<div class="report" *ngIf="this.report$ | async as report; else noReport">
  <div class="report-header">
    <h1>{{ 'Report from run ' + report.id }}</h1>

    <div class="buttons">
      <button mat-button (click)="showTimeline()"><mat-icon color="primary">schedule</mat-icon> Show timeline</button>
      <button mat-button (click)="downloadReport()"><mat-icon color="primary">download</mat-icon> Download JSON</button>
    </div>
  </div>

  <mat-divider></mat-divider>

  <app-run-report-card [report]="report"></app-run-report-card>

  <div class="plan-execution-header">
    <h2>Execution</h2>
    <mat-paginator
      #paginator
      id="paginator"
      [hidePageSize]="true"
      [length]="report.plan_executions.length"
      [pageSize]="1"
      [showFirstLastButtons]="true"
    >
    </mat-paginator>
  </div>

  <mat-divider></mat-divider>

  <ng-container *ngIf="report.plan_executions[paginator.pageIndex] as executionReport">
    <app-execution-report-card [execution]="executionReport"></app-execution-report-card>
  </ng-container>
</div>

<ng-template #noReport>
  <div class="no-report">
    <h1>We are sorry.</h1>
    <h2>The report you are looking for doesn't exist.</h2>
  </div>
</ng-template>
